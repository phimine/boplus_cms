{"remainingRequest":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/goods/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/goods/index.vue","mtime":1590767910000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport checkPermission from '@/utils/permission'\nimport initData from '@/mixins/crud'\nimport { del, onsale } from '@/api/yxStoreProduct'\nimport eForm from './form'\nimport eAttr from './attr'\nimport comForm from '@/views/activity/combination/form'\nimport killForm from '@/views/activity/seckill/form'\nimport bargainForm from '@/views/activity/bargain/form'\nexport default {\n  components: { eForm, eAttr, comForm, killForm, bargainForm },\n  mixins: [initData],\n  data() {\n    return {\n      delLoading: false,\n      visible: false,\n      queryTypeOptions: [\n        { key: 'storeName', display_name: '商品名称' }\n      ],\n      isAttr: false\n    }\n  },\n  created() {\n    this.$nextTick(() => {\n      this.init()\n    })\n  },\n  methods: {\n    checkPermission,\n    beforeInit() {\n      this.url = 'api/yxStoreProduct'\n      const sort = 'id,desc'\n      this.params = { page: this.page, size: this.size, sort: sort, isShow: 1, isDel: 0 }\n      const query = this.query\n      const type = query.type\n      const value = query.value\n      if (type && value) { this.params[type] = value }\n      return true\n    },\n    subDelete(id) {\n      this.delLoading = true\n      del(id).then(res => {\n        this.delLoading = false\n        this.$refs[id].doClose()\n        this.dleChangePage()\n        this.init()\n        this.$notify({\n          title: '删除成功',\n          type: 'success',\n          duration: 2500\n        })\n      }).catch(err => {\n        this.delLoading = false\n        this.$refs[id].doClose()\n        console.log(err.response.data.message)\n      })\n    },\n    onSale(id, status) {\n      this.$confirm(`确定进行[${status ? '下架' : '上架'}]操作?`, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          onsale(id, { status: status }).then(({ data }) => {\n            this.$message({\n              message: '操作成功',\n              type: 'success',\n              duration: 1000,\n              onClose: () => {\n                this.init()\n              }\n            })\n          })\n        })\n        .catch(() => { })\n    },\n    add() {\n      this.isAdd = true\n      this.$refs.form.dialog = true\n      this.$refs.form.getCates()\n    },\n    edit(data) {\n      this.isAdd = false\n      const _this = this.$refs.form\n      _this.getCates()\n      _this.form = {\n        id: data.id,\n        merId: data.merId,\n        image: data.image,\n        sliderImage: data.sliderImage,\n        imageArr: data.image.split(','),\n        sliderImageArr: data.sliderImage.split(','),\n        storeName: data.storeName,\n        storeInfo: data.storeInfo,\n        keyword: data.keyword,\n        barCode: data.barCode,\n        storeCategory: data.storeCategory || {id:null},\n        price: data.price,\n        vipPrice: data.vipPrice,\n        otPrice: data.otPrice,\n        postage: data.postage,\n        unitName: data.unitName,\n        sort: data.sort,\n        sales: data.sales,\n        stock: data.stock,\n        isShow: data.isShow,\n        isHot: data.isHot,\n        isBenefit: data.isBenefit,\n        isBest: data.isBest,\n        isNew: data.isNew,\n        description: data.description,\n        addTime: data.addTime,\n        isPostage: data.isPostage,\n        isDel: data.isDel,\n        merUse: data.merUse,\n        giveIntegral: data.giveIntegral,\n        cost: data.cost,\n        isSeckill: data.isSeckill,\n        isBargain: data.isBargain,\n        isGood: data.isGood,\n        ficti: data.ficti,\n        browse: data.browse,\n        codePath: data.codePath,\n        soureLink: data.soureLink\n      }\n      _this.dialog = true\n    },\n    editC(data) {\n      this.isAdd = false\n      const _this = this.$refs.form3\n      _this.form = {\n        productId: data.id,\n        merId: data.merId,\n        image: data.image,\n        images: data.sliderImage,\n        imageArr: data.image.split(','),\n        sliderImageArr: data.sliderImage.split(','),\n        title: data.storeName,\n        info: data.storeInfo,\n        postage: data.postage,\n        unitName: data.unitName,\n        sort: data.sort,\n        sales: data.sales,\n        stock: data.stock,\n        isShow: data.isShow,\n        isHost: data.isHot,\n        description: data.description,\n        isPostage: data.isPostage,\n        people: 0,\n        price: 0,\n        effectiveTime: 24,\n        combination: 1,\n        cost: data.cost,\n        isDel: 0,\n        browse: 0\n      }\n      _this.dialog = true\n    },\n    editD(data) {\n      this.isAdd = false\n      const _this = this.$refs.form4\n      _this.form = {\n        productId: data.id,\n        merId: data.merId,\n        image: data.image,\n        images: data.sliderImage,\n        imageArr: data.image.split(','),\n        sliderImageArr: data.sliderImage.split(','),\n        title: data.storeName,\n        info: data.storeInfo,\n        postage: data.postage,\n        unitName: data.unitName,\n        sort: data.sort,\n        sales: data.sales,\n        stock: data.stock,\n        isShow: data.isShow,\n        status: 1,\n        isHot: data.isHot,\n        description: data.description,\n        isPostage: data.isPostage,\n        people: 0,\n        price: 0.01,\n        effectiveTime: 24,\n        otPrice: data.otPrice,\n        cost: data.cost,\n        num: 1,\n        giveIntegral: 0,\n        isDel: 0,\n        browse: 0\n      }\n      _this.dialog = true\n    },\n    editE(data) {\n      this.isAdd = false\n      const _this = this.$refs.form5\n      _this.form = {\n        productId: data.id,\n        merId: data.merId,\n        image: data.image,\n        images: data.sliderImage,\n        imageArr: data.image.split(','),\n        sliderImageArr: data.sliderImage.split(','),\n        title: data.storeName,\n        info: data.storeInfo,\n        postage: data.postage,\n        unitName: data.unitName,\n        sort: data.sort,\n        sales: data.sales,\n        stock: data.stock,\n        isShow: data.isShow,\n        status: 1,\n        isHot: data.isHot,\n        description: data.description,\n        isPostage: data.isPostage,\n        people: 0,\n        price: 0.01,\n        effectiveTime: 24,\n        otPrice: data.otPrice,\n        cost: data.cost,\n        num: 1,\n        giveIntegral: 0,\n        isDel: 0,\n        browse: 0\n      }\n      _this.dialog = true\n    },\n    attr(data) {\n      console.log(3333)\n      this.isAttr = false\n      const _this = this.$refs.form2\n      _this.form = {\n        id: data.id,\n        merId: data.merId,\n        image: data.image,\n        sliderImage: data.sliderImage,\n        storeName: data.storeName,\n        storeInfo: data.storeInfo,\n        keyword: data.keyword,\n        barCode: data.barCode,\n        storeCategory: data.storeCategory,\n        price: data.price,\n        vipPrice: data.vipPrice,\n        otPrice: data.otPrice,\n        postage: data.postage,\n        unitName: data.unitName,\n        sort: data.sort,\n        sales: data.sales,\n        stock: data.stock,\n        isShow: data.isShow,\n        isHot: data.isHot,\n        isBenefit: data.isBenefit,\n        isBest: data.isBest,\n        isNew: data.isNew,\n        description: data.description,\n        addTime: data.addTime,\n        isPostage: data.isPostage,\n        isDel: data.isDel,\n        merUse: data.merUse,\n        giveIntegral: data.giveIntegral,\n        cost: data.cost,\n        isSeckill: data.isSeckill,\n        isBargain: data.isBargain,\n        isGood: data.isGood,\n        ficti: data.ficti,\n        browse: data.browse,\n        codePath: data.codePath,\n        soureLink: data.soureLink\n      }\n      _this.dialog = true\n      this.$refs.form2.getAttrs(data.id)\n    }\n  }\n}\n",null]}