{"remainingRequest":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/wechat/reply/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/wechat/reply/index.vue","mtime":1590767910000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport checkPermission from '@/utils/permission'\nimport initData from '@/mixins/crud'\nimport { del, add, get } from '@/api/yxWechatReply'\nimport eForm from './form'\nimport picUpload from '@/components/pic-upload'\nimport { Message } from 'element-ui'\nexport default {\n  components: { eForm, picUpload },\n  mixins: [initData],\n  data() {\n    return {\n      delLoading: false,\n      status: 1,\n      msg: '',\n      type: 'text',\n      textBox: '',\n      pic: '',\n      key: '',\n      dataGroup: {\n        text: {\n          content: ''\n        },\n        image: {\n          src: ''\n        },\n        voice: {\n          src: ''\n        },\n        news: []\n      },\n      uploadColl: function() {\n      },\n      uploadLink: '',\n      result: null\n    }\n  },\n  created() {\n    this.$nextTick(() => {\n      this.init()\n    })\n  },\n  mounted: function() {\n    this.key = 'subscribe'\n    this.msg = '编辑关注回复'\n    get().then(rese => {\n      this.result = rese\n      this.type = rese.type\n      this.status = rese.status\n      const newData = JSON.parse(rese.data)\n      if (rese.type == 'image') {\n        this.dataGroup.image.src = newDatasrc\n      } else if (rese.type == 'text') {\n        this.dataGroup.text.content = newData.content\n      }\n      if (this.used_key) {\n        this.keyword = this.result.key\n      }\n    })\n  },\n  methods: {\n    checkPermission,\n    beforeInit() {\n      this.url = 'api/yxWechatReply'\n      const sort = 'id,desc'\n      this.params = { page: this.page, size: this.size, sort: sort }\n      return true\n    },\n    subDelete(id) {\n      this.delLoading = true\n      del(id).then(res => {\n        this.delLoading = false\n        this.$refs[id].doClose()\n        this.dleChangePage()\n        this.init()\n        this.$notify({\n          title: '删除成功',\n          type: 'success',\n          duration: 2500\n        })\n      }).catch(err => {\n        this.delLoading = false\n        this.$refs[id].doClose()\n        console.log(err.response.data.message)\n      })\n    },\n    add() {\n      this.isAdd = true\n      this.$refs.form.dialog = true\n    },\n    edit(data) {\n      this.isAdd = false\n      const _this = this.$refs.form\n      _this.form = {\n        id: data.id,\n        key: data.key,\n        type: data.type,\n        data: data.data,\n        status: data.status,\n        hide: data.hide\n      }\n      _this.dialog = true\n    },\n    submit: function() {\n      if (!this.check()) return false\n\n      add({ key: this.key, status: this.status, data: this.dataGroup[this.type], type: this.type }).then(function(res) {\n        Message({ message: '设置成功', type: 'success' })\n      }).catch(function(err) {\n        // Message({message: err,type: 'error'})\n      })\n    },\n    check: function() {\n      var dataGroup = this.dataGroup\n      switch (this.type) {\n        case 'text':\n          if (dataGroup.text.content == '') { return this.returnError('请输入文字消息内容') }\n          break\n        case 'image':\n          if (dataGroup.image.src == '') { return this.returnError('请上传图片') }\n          break\n      }\n      return true\n    }\n  }\n}\n",null]}