{"remainingRequest":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/store/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/store/index.vue","mtime":1590767910000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport crudYxSystemStore from '@/api/yxSystemStore'\nimport CRUD, { presenter, header, form, crud } from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport udOperation from '@crud/UD.operation'\nimport pagination from '@crud/Pagination'\nimport MaterialList from '@/components/material'\nimport { parseTime } from '@/utils/index'\n\n// crud交由presenter持有\nconst defaultCrud = CRUD({ title: '门店', url: 'api/yxSystemStore', sort: 'id,desc', crudMethod: { ...crudYxSystemStore }})\nconst defaultForm = { id: null, name: null, introduction: null, phone: null, address: null, detailedAddress: null, image: null, latitude:\nnull, longitude: null, validTime: null, dayTime: null, addTime: null, isShow: 1, imageArr: [], validTimeArr: [],  dayTimeArr: [new Date(),new Date()] }\nexport default {\n  name: 'YxSystemStore',\n  components: { pagination, crudOperation, rrOperation, udOperation, MaterialList },\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n  data() {\n    return {\n      permission: {\n        add: ['admin', 'yxSystemStore:add'],\n        edit: ['admin', 'yxSystemStore:edit'],\n        del: ['admin', 'yxSystemStore:del']\n      },\n      rules: {\n        name: [\n          { required: true, message: '门店名称不能为空', trigger: 'blur' }\n        ],\n        introduction: [\n          { required: true, message: '简介不能为空', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '手机号码不能为空', trigger: 'blur' }\n        ],\n        address: [\n          { required: true, message: '省市区不能为空', trigger: 'blur' }\n        ],\n        latitude: [\n          { required: true, message: '纬度不能为空', trigger: 'blur' }\n        ],\n        longitude: [\n          { required: true, message: '经度不能为空', trigger: 'blur' }\n        ],\n        isShow: [\n          { required: true, message: '是否显示不能为空', trigger: 'blur' }\n        ]\n      }\n      }\n  },\n  methods: {\n    // 获取数据前设置好接口地址\n    [CRUD.HOOK.beforeRefresh]() {\n      return true\n    },\n    // 添加后\n    [CRUD.HOOK.beforeSubmit]() {\n      //console.log('hah:'+this.form.imageArr)\n      this.form.image = this.form.imageArr.join(',')\n    },\n    // 编辑前\n    [CRUD.HOOK.beforeToEdit](crud, form) {\n      form.imageArr = [form.image]\n      form.dayTimeArr = [form.dayTimeStart,form.dayTimeEnd]\n      form.validTimeArr = [form.validTimeStart,form.validTimeEnd]\n    },\n    getTime(t) {\n      this.form.dayTimeStart = t[0]\n      this.form.dayTimeEnd = t[1]\n      this.form.dayTime = parseTime(t[0],'{h}:{i}:{s}') + ' - ' + parseTime(t[1],'{h}:{i}:{s}')\n    },\n    getTimeT(t) {\n      this.form.validTimeStart = t[0]\n      this.form.validTimeEnd = t[1]\n      this.form.validTime = parseTime(t[0],'{y}-{m}-{d}') + ' - ' + parseTime(t[1],'{y}-{m}-{d}')\n    },\n    getL(addr) {\n      crudYxSystemStore.getL({addr}).then(res => {\n        this.form.latitude = res.result.location.lat\n        this.form.longitude = res.result.location.lng\n\n        //console.log(this.form)\n      })\n    }\n  }\n}\n",null]}