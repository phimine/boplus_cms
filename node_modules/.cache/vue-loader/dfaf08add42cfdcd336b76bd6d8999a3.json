{"remainingRequest":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/storestaff-deleting/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/storestaff-deleting/index.vue","mtime":1590767910000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport crudYxSystemStoreStaff from '@/api/yxSystemStoreStaff'\nimport CRUD, { presenter, header, form, crud } from '@crud/crud'\nimport rrOperation from '@crud/RR.operation'\nimport crudOperation from '@crud/CRUD.operation'\nimport udOperation from '@crud/UD.operation'\nimport pagination from '@crud/Pagination'\nimport cuser from '@/views/components/user'\nimport crudYxSystemStore from '@/api/yxSystemStore'\n\n// crud交由presenter持有\nconst defaultCrud = CRUD({ title: '门店店员', url: 'api/yxSystemStoreStaff', sort: 'id,desc', crudMethod: { ...crudYxSystemStoreStaff }})\nconst defaultForm = { user: {uid: null,nickname: null,avatar: null}, id: null, uid: null, avatar: null, storeId: null, staffName: null, phone: null, verifyStatus: 1, status: null, addTime: null, nickname: null, storeName: null }\nexport default {\n  name: 'YxSystemStoreStaff',\n  components: { pagination, crudOperation, rrOperation, udOperation, cuser },\n  mixins: [presenter(defaultCrud), header(), form(defaultForm), crud()],\n  data() {\n    return {\n      mystores: [],\n      permission: {\n        add: ['admin', 'yxSystemStoreStaff:add'],\n        edit: ['admin', 'yxSystemStoreStaff:edit'],\n        del: ['admin', 'yxSystemStoreStaff:del']\n      },\n      rules: {\n        // uid: [\n        //   { required: true, message: '微信用户id不能为空', trigger: 'blur' }\n        // ],\n        // avatar: [\n        //   { required: true, message: '店员头像不能为空', trigger: 'blur' }\n        // ],\n        // storeId: [\n        //   { required: true, message: '门店id不能为空', trigger: 'blur' }\n        // ],\n        // staffName: [\n        //   { required: true, message: '店员名称不能为空', trigger: 'blur' }\n        // ],\n        // phone: [\n        //   { required: true, message: '手机号码不能为空', trigger: 'blur' }\n        // ],\n        // verifyStatus: [\n        //   { required: true, message: '核销开关不能为空', trigger: 'blur' }\n        // ],\n        // nickname: [\n        //   { required: true, message: '微信昵称不能为空', trigger: 'blur' }\n        // ]\n      },\n      queryTypeOptions: [\n        { key: 'staffName', display_name: '店员名称' },\n        { key: 'nickname', display_name: '微信昵称' }\n      ]\n    }\n  },\n  methods: {\n    // 获取数据前设置好接口地址\n    [CRUD.HOOK.beforeRefresh]() {\n      const query = this.query\n      console.log('query:'+query.value)\n      if (query.type && query.value) {\n        this.crud.params[query.type] = query.value\n      }else{\n        delete this.crud.params.staffName\n        delete this.crud.params.nickname\n      }\n      return true\n    },\n    //新增与编辑前做的操作\n    [CRUD.HOOK.afterToCU](crud, form) {\n      crudYxSystemStore.get().then(res => {\n         this.mystores= res.content\n      })\n    },\n    // 编辑前\n    [CRUD.HOOK.beforeToEdit](crud, form) {\n      this.form.user.uid = form.uid\n      this.form.user.nickname = form.nickname\n      this.form.user.avatar = form.avatar\n    },\n    [CRUD.HOOK.beforeSubmit]() {\n      this.form.uid = this.form.user.uid\n      this.form.nickname = this.form.user.nickname\n      this.form.avatar = this.form.user.avatar\n    }\n  }\n}\n",null]}