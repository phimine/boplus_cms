{"remainingRequest":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/material/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/src/views/shop/material/form.vue","mtime":1590982174185},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/c5281434/Documents/Project/yshopmall_qd-master/node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { add, edit } from '@/api/bopMaterial'\nimport crudOperation from '@crud/CRUD.operation'\nimport {mapGetters} from \"vuex\";\n\nexport default {\n  components: { crudOperation },\n\n  props: {\n    isAdd: {\n      type: Boolean,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false, dialog: false,\n      form: {\n        id: '',\n        name: '',\n        type: '',\n        url: '',\n        createTime: '',\n        creatorId: '',\n        creator: '',\n        isDel: ''\n      },\n      rules: {\n      }\n\n    }\n  },\n  // created() {\n  //   this.initOptions();\n  // },\n  computed: {\n    ...mapGetters([\n      'user'\n    ])\n  },\n  methods: {\n    // initOptions() {\n    //   this.typeOptions = [\n    //     { value: '1', label: '图片'},\n    //     { value: '2', label: '视频'}\n    //   ]\n    // },\n    // // 打开编辑弹窗前做的操作\n    // [CRUD.HOOK.beforeToEdit](crud, form) {\n    //   this.initOptions()\n    // },\n    cancel() {\n      this.resetForm()\n    },\n    doSubmit() {\n      this.loading = true\n      if (this.isAdd) {\n        this.doAdd()\n      } else this.doEdit()\n    },\n    doAdd() {\n      this.form.createTime = new Date()\n      this.form.creatorId = this.user.id\n      this.form.creator = this.user.username\n      add(this.form).then(res => {\n        this.resetForm()\n        this.$notify({\n          title: '添加成功',\n          type: 'success',\n          duration: 2500\n        })\n        this.loading = false\n        this.$parent.init()\n      }).catch(err => {\n        this.loading = false\n        console.log(err.response.data.message)\n      })\n    },\n    doEdit() {\n      edit(this.form).then(res => {\n        this.resetForm()\n        this.$notify({\n          title: '修改成功',\n          type: 'success',\n          duration: 2500\n        })\n        this.loading = false\n        this.$parent.init()\n      }).catch(err => {\n        this.loading = false\n        console.log(err.response.data.message)\n      })\n    },\n    resetForm() {\n      this.dialog = false\n      this.$refs['form'].resetFields()\n      this.form = {\n        id: '',\n        name: '',\n        type: '',\n        url: '',\n        createTime: '',\n        creatorId: '',\n        creator: '',\n        isDel: ''\n      }\n    }\n  }\n}\n",null]}